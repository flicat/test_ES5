<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Array</title>
</head>
<body>
<script type="text/javascript">
    var log = function() {
        console.log.apply(console, arguments);
    };
    var dir = function() {
        console.dir.apply(console, arguments);
    };

    (function() {
        var a;
        var a1 = new Array();
        var a2 = new Array(2);
        var a3 = new Array('abc');
        var a4 = new Array([3]);
        var a5 = new Array(4, 5, 6);
//        var a6 = new Array(-1);             // RangeError: Invalid array length

//        log(a1);           // []
//        log(a2);           // [undefined, undefined]
//        log(a3);           // ["abc"]
//        log(a4);           // [[3]]
//        log(a5);           // [4, 5, 6]

        // Array.isArray方法用来判断一个值是否为数组。
//        log(Array.isArray(a1));     // true
//        log(Array.isArray(a));      // false

//        log(a5.valueOf());        // [4, 5, 6]
//        log(a5.toString());       // 4,5,6

        var arr1 = [1, 2, 3, 4];
        var arr2 = ['a', 'b', 'c', 'd'];

        // 合并两个数组,等同于 arr1.push('a', 'b', 'c', 'd')
//        Array.prototype.push.apply(arr1, arr2);
//        log(arr1);                 // [1, 2, 3, 4, "a", "b", "c", "d"]

        var str = 'hello';
        var obj = {a: 123};
        // 用于向对象添加元素，添加后的对象变成“类似数组的”对象
        [].push.call(obj, 456);
//        log(obj);          // Object {0: 456, a: 123, length: 1}

//        log(arr2.join('|'));   // a|b|c|d

        // join方法（即Array.prototype.join）也可以用于字符串
//        log([].join.call(str, '-'));   // h-e-l-l-o

//        log(arr2.slice(1, 2));                   // ["b"]
//        log(arr2.slice(1));                      // ["b", "c", "d"]
//        log(arr2.slice(0));                      // ["a", "b", "c", "d"]
//        log(arr2.slice(-2));                     // ["c", "d"]
//        log(arr2.slice(5));                      // []
//        log(arr2.slice(2,6));                    // ["c", "d"]
//        log(arr2.slice(2,1));                    // []

        // 将类似数组的对象转为真正的数组
        var arr3 = [].slice.call({'3': 'a', '2': function(){}, length: 4});
//        log(arr3);       // [undefined, undefined, function, "a"]

    })();


    (function() {
        var arr = [4, 56, 7, 8, 95, 48, 52, 2, 5];

        // map方法对所有元素依次调用一个函数，根据函数结果返回一个新数组。
        var arr2 = arr.map(function(elem, index, arr) {     // 数组的当前元素elem、该元素的位置index和整个数组arr
            return elem * 2;
        });
//        log(arr2);                   // [8, 112, 14, 16, 190, 96, 104, 4, 10]

        // map方法可以用于字符串。
        var arr3 = [].map.call('hello', function(elem) {
            return elem.toUpperCase();
        });
//        log(arr3);    // ["H", "E", "L", "L", "O"]

        // forEach方法对所有元素依次执行一个函数
        arr.forEach(function(elem, index, arr) {
//            log(elem * 10);
        });

        var arr4 = [];
        // map 和 forEach 方法都可以接受第二个参数，用来绑定函数中的this关键字。
        arr.forEach(function(elem, index, arr) {
            this.push(elem);
        }, arr4);
//        log(arr4);       // [4, 56, 7, 8, 95, 48, 52, 2, 5]

        // filter方法依次对所有数组成员调用一个测试函数，返回结果为true的成员组成一个新数组返回
        var arr5 = arr.filter(function(elem) {
            return elem > 10;
        });
//        log(arr5);           // [56, 95, 48, 52]


        // some方法对所有元素调用一个测试函数，只要有一个元素通过该测试，就返回true，否则返回false。
//        log(arr.some(function(elem) {
//            return elem > 50;
//        }));                          // true
//        log(arr.some(function(elem) {
//            return elem > 100;        // false
//        }));

        // every方法对所有元素调用一个测试函数，只有所有元素通过该测试，才返回true，否则返回false。
//        log(arr.every(function(elem) {
//            return elem > 50;
//        }));                          // false
//        log(arr.every(function(elem) {
//            return elem < 100;        // true
//        }));

        // 依次处理数组的每个元素，最终累计为一个值。
        var sum = arr.reduce(function(sum, elem, index, arr) {
            return sum + elem;
        });
//        log(sum);               // 277

        // 如果要对累计变量指定初值，可以把它放在reduce方法的第二个参数。默认为0
        var sum2 = arr.reduce(function(sum, elem, index, arr) {
            return sum - elem;
        }, 300);
//        log(sum2);              // 23


        // indexOf方法返回给定元素在数组中第一次出现的位置，如果没有出现则返回-1。
//        log(arr.indexOf(95));           // 4
//        log(arr.lastIndexOf(2));        // 7
//        log(arr.indexOf(10));           // -1
        // indexOf方法还可以接受第二个参数，表示搜索的开始位置。
//        log(arr.indexOf(4, 6));         // -1

        // 如果数组中包含NaN，这两个方法不适用。
//        log([NaN].indexOf(NaN));        // -1
    })();
</script>
</body>
</html>